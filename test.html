<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Test Protobuf</title>
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/gh/dcodeIO/protobuf.js@6.9.0/dist/protobuf.js"></script>
    <link rel="stylesheet" href="https://npmcdn.com/leaflet@1.3.4/dist/leaflet.css" />

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://npmcdn.com/leaflet@1.3.4/dist/leaflet.js"></script>
    <script src="utils.js"></script>
    <script src="zip/zip.js"></script>
    <script src="zip.js"></script>
    <script src="gtfs.js"></script>

    <!-- Load required Bootstrap and BootstrapVue CSS -->
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />


</head>

<body ondrop="drop(event)" ondragover="allowDrop(event)">
    <div id="app">
        <nav class="navbar navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Trips Viewer</a>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <label class="input-group-text" for="selectRTFeed">Trip</label>
                </div>
                <select class="custom-select" id="selectRTFeed" v-model="selectedTrip">
                    <option v-for="(tripUpdate, index) in tripUpdates" v-bind:value="tripUpdate">{{ this.GTFS.datas.routes[tripUpdate.tripUpdate.trip.routeId].route_long_name }}</option>
                </select>
            </div>
        </nav>
        <div class="container-fluid">
            <div class="row" v-if="selectedTrip">
                <div class="col-6" id="tripsList">
                    <table class="table table-sm table-hover">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Arrêts</th>
                                <th scope="col">Horaire Théorique</th>
                                <th scope="col">ETA (RT)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="stopTime in this.GTFS.datas.stop_times[selectedTrip.tripUpdate.trip.tripId]">
                                <th scope="row">{{ this.GTFS.datas.stops[stopTime.stop_id].stop_name }}</th>
                                <td>{{ stopTime.arrival_time }}</td>
                                <td>{{ getETA(stopTime.stop_sequence) }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-6" id="map">
                </div>
            </div>
        </div>
    </div>
</body>

<script src="map.js"></script>
<script src="test.js"></script>
<!-- Load polyfills to support older browsers -->
<script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>

<!-- Load Vue followed by BootstrapVue -->
<script src="//unpkg.com/vue@latest/dist/vue.min.js"></script>
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

<!-- Load the following for BootstrapVueIcons support -->
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.min.js"></script>
<script src="vue.js"></script>

</html>
